<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rezervace víkendů</title>
    <script type="module">
        // Import Firebase SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";

        // Firebase konfigurace
        const firebaseConfig = {
            apiKey: "AIzaSyANu2hUSkoFgD9f1p6Vqxon9Yhd-dpRcys",
            authDomain: "webik-77081.firebaseapp.com",
            projectId: "webik-77081",
            storageBucket: "webik-77081.appspot.com",
            messagingSenderId: "199199665865",
            appId: "1:199199665865:web:b3b34d1877ea27f7f9e718",
            measurementId: "G-VC7L34JMFT"
        };

        // Inicializace Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Funkce pro rezervaci
        async function rezervovat() {
            let jmeno = document.getElementById("jmeno").value;
            if (jmeno === "") return alert("Zadej své jméno!");

            try {
                await addDoc(collection(db, "rezervace"), {
                    jmeno: jmeno,
                    cas: new Date()
                });
                zobrazRezervace(); // Aktualizace seznamu
            } catch (e) {
                console.error("Chyba při ukládání rezervace: ", e);
            }
        }

        // Funkce pro zobrazení rezervací
        async function zobrazRezervace() {
            const seznam = document.getElementById("seznam");
            seznam.innerHTML = "Načítání...";

            try {
                const dotaz = await getDocs(collection(db, "rezervace"));
                seznam.innerHTML = "";
                dotaz.forEach((doc) => {
                    let li = document.createElement("li");
                    li.textContent = doc.data().jmeno;
                    seznam.appendChild(li);
                });
            } catch (e) {
                console.error("Chyba při načítání rezervací: ", e);
            }
        }

        // Automatické načtení rezervací při spuštění stránky
        window.onload = zobrazRezervace;
    </script>
</head>
<body>
    <h1>Rezervace víkendu</h1>
    <input type="text" id="jmeno" placeholder="Tvé jméno">
    <button onclick="rezervovat()">Rezervovat víkend</button>

    <h2>Seznam rezervací:</h2>
    <ul id="seznam"></ul>
</body>
</html>
